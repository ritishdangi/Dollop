<!-- Navbar -->
<nav class="navbar">
  <div class="navbar-left">Welcome, {{ csrName }}</div>
  <div class="navbar-right">
    <button class="back-btn" (click)="logout()">LogOut</button>
  </div>
</nav>

<h2 class="heading">ðŸ“¥ Assigned Tickets</h2>

<div *ngIf="tickets.length; else noTickets" class="ticket-grid">
  <div *ngFor="let t of tickets" class="ticket-card">
    
    <div class="ticket-header">
      <p><strong>Customer:</strong> {{ t.customerName }}</p>
      <h3>{{ t.title }}</h3>
    </div>

    <p class="desc">{{ t.description }}</p>

    <div class="ticket-meta">
      <span class="priority">Priority: {{ t.priority }}</span>
      <span class="status">Status: {{ t.status }}</span>
    </div>

    <div class="ticket-actions">
      <select [(ngModel)]="t.updatedStatus" class="status-dropdown" [disabled]="t.status === 'RESOLVED'">
        <option value="OPEN">OPEN</option>
        <option value="IN_PROGRESS">IN_PROGRESS</option>
        <option value="PENDING">PENDING</option>
        <option value="RESOLVED">RESOLVED</option>
      </select>

      <button
        class="update-btn"
        (click)="updateStatus(t)"
        [disabled]="t.status === 'RESOLVED' || t.updatedStatus === t.status">
        Update
      </button>
    </div>
    
  </div>
</div>

<ng-template #noTickets>
  <p class="empty-msg">No tickets assigned.</p>
</ng-template>
